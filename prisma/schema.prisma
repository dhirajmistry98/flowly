generator client {
  provider = "prisma-client"
  output   = "../lib/generated/prisma"
}

datasource db {
  provider = "postgresql"
}
 
model Channel {
  id String @id @default(uuid())

  name String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  workspaceId String
  createdById String

  @@unique([workspaceId,name ])

  message Message[]
}

model Message {
     id String @id @default(uuid())

     content String
     imageUrl String?

     createdAt DateTime @default(now())

     updatedAt DateTime @updatedAt

     authorId String   //kinde user ID
     authorEmail String // user's email
     authorName String // Display name

     authorAvatar String // Avatar URL

     channel Channel? @relation(fields: [channelId],references: [id])
     channelId String?

     // Thread relation

      parentMessage Message? @relation("MessageThread",fields: [threadId],references: [id],onDelete: Cascade)
      threadId          String?
      replies            Message[] @relation("MessageThread")
}